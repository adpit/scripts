#!/usr/bin/perl

# 040126

use RIFF::Info;

die "Usage: $0 <avifile> ...\n" unless @ARGV;

for (@ARGV) {
  print "\n$_:\n",("=" x (length($_)+1)),"\n" if @ARGV > 1;
  $video = RIFF::Info->new(-file => $_, -headersize=>65536);
  $video->probe();
  
  print
    "number of audio channels                 : ", $video->achans(), "\n",
    "audio codec                              : ", $video->acodec(), "\n",
    "audio codec numeric ID                   : ", $video->acodecraw(), "\n",
    "audio bitrate                            : ", $video->arate(), "\n",
    "sampling rate of audio streams, in Hertz : ", $video->afrequency(), "\n",
    "number of audio streams                  : ", $video->astreams(), "\n",

    "path file used to create object          : ", $video->filename(), "\n",
    "size in bytes of filename()              : ", $video->filesize(), "\n",
    "expected size in bytes of filename()     : ", $video->expectedsize(), "\n",

    "RIFF Four Character Code                 : ", $video->fourcc(), "\n",
    "frames/second                            : ", $video->fps(), "\n",
    "video bitrate                            : ", $video->scale(), "\n",
    "type of file data.  RIFF or AVI          : ", $video->type(), "\n",
    "video codec                              : ", $video->vcodec(), "\n",
    "number of frames                         : ", $video->vframes(), "\n",
    "video bitrate                            : ", $video->vrate(), "\n",
    "number of video streams                  : ", $video->vstreams(), "\n",
    "frame size in pixels                     : ", $video->width(), "x", $video->height(), "\n",
  "";
}